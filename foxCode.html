<!DOCTYPE html>
<html>
<head>
    <title>The Coding Fox</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fontdiner+Swanky&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: "Poppins", "sans-serif";
            background-color: #dfdbdb;
            margin: 0;
            padding: 0;
             background-image: url('https://media.publit.io/file/China-night.png');
              background-size: cover; 
        }

      

        #divStart {
            background-image: url("https://media.publit.io/file/Hills-and-mountains-night.png");
            background-size: cover;
            width: auto;
            height: 955px;
        }

        .btnDivStart {
            width: 12%;
            height: 45px;
            border-radius: 12px;
            border: none;
            transition: all ease 0.3s;
            font-size: 20px;

        }

        @keyframes moveUp {
           0% {
             transform: translateY(0);
           }
           50% {
             transform: translateY(25px);
           }
           100% {
             transform: translateY(0);
           }
        }

        #tutorialBtn:hover {
            transform: scale(1.05);
            border: 1px solid white !important;
            
        }


        #codeInp1::placeholder {
            color: rgba(0, 0, 0, 0.76);
            font-weight: 500;
        }

        #runCodeBtn1:hover {
            transform: scale(1.15) !important;
            background-color: rgb(74, 204, 62) !important;
            cursor: pointer;
        }
        
        .backgroundCellDiv, .wallCellDiv {
            width: 100%;
            height: 100%;
            border: 0.1px solid rgba(0, 0, 0, 0.377);
            box-sizing: border-box;
        }	

        .playBtn {
            width: 7%;
            height: 37px;
            background-color: #5add81;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 20px;
            margin-top: 130px;
            margin-left: 44px;
            position: absolute;
            transition: 0.3s ease all;
        }

        .playBtn:hover {
            transform: scale(1.05);
            background-color: #44b363 !important;
            cursor: pointer;
        }


        .levelText {
            font-size: 30px;
            font-weight: 600;
            color: rgb(0, 0, 0);
            margin-top: 55px;
            margin-left: 25px;
            position: absolute;
            font-family: "Fontdiner Swanky", serif;
            letter-spacing: 6px;
            font-weight: 500;
        }

        #nextBtn1:hover, #nextBtn2:hover, #nextBtn22:hover {
            transform: scale(1.05);
            cursor: pointer;
            background-color: #534c94 !important;
        }
        #nextBtn1, #nextBtn2 {
            transition: 0.3s ease all;
        }



        #dialogText1 {
            animation: op 4s forwards;
            
                
        }

        @keyframes op {
            from {
                opacity: 0;
                
            }
            to {
               opacity: 1;
            }
        }

        .buglingImg {
            animation: buglingG 2s infinite;
        }

        @keyframes buglingG {
            0% {
                transform: scale(0.12);
            }
            50% {
                transform: scale(0.14);
            }
            100% {
                transform: scale(0.12);
            }
        }

    </style>
</head>
<body>
    <div style="display: block;" id="divStart">
       <h2 style="color: white; font-size: 65px; margin-top: 310px; position: absolute; left: 35%; font-family: 'none', serif;
       "> START GAME</h2>
        <img style="filter: brightness(640%); position: absolute; margin-left: 630px; margin-top: 150px;" src="https://images.vexels.com/media/users/3/132477/isolated/preview/3b36d6c1705c1902d34a84ba17ee531d-tiny-lines-dots-divider.png" alt="">
        <p onclick="levelsDivDisplay()" style="color: white; font-size: 30px; font-family: 'none';  margin-left: 780px;
         margin-top: 485px; position: absolute; font-weight: 300; letter-spacing: 1.5px; animation: moveUp 6s infinite; cursor: pointer;">TAP TO BEGIN</p>
   

        <button onclick="tutorialDiv.style.display = 'block'" id="tutorialBtn" style="transition: 0.3s ease all; border: 1px solid rgba(255, 255, 255, 0.514); border-radius: 4px; background-color: #21212be7; color: rgba(250, 243, 228, 0.856);
        width: 20%; height: 60px; font-size: 25px; font-weight: 600; letter-spacing: 2px; margin-left: 700px; margin-top: 700px;
         font-family: 'Poppins', 'sans-serif'; cursor: pointer;"> Tutorial</button>
    </div>


    <div style="width: 28%; height: 650px; position: absolute; background-color: rgb(26, 26, 26); margin-top: -740px; margin-left: 650px;
     padding-left: 15px; box-shadow: black 7px 12px 31px 8px; display: none;" id="tutorialDiv">
        <button onclick="this.parentElement.style.display = 'none'" style="color: white; background-color: red; border-radius: 100%; border: none; position: absolute; width: 25px; height: 25px; margin-left: 515px; 
        margin-top: -10px; font-size: 18px; cursor: pointer;"> X</button>
        <p style="color: white; margin-top: 50px; margin-left: 15px;"> This is a game to learn coding, and functions.</p>
        <p style="color: white; margin-top: 40px; margin-left: 15px; font-size: 23px; font-weight: 600;"> What is a function?</p>
         <p style="color: white; margin-top: -10px; margin-left: 40px; max-width: 400px;"> A function is a block of code that performs a specific task. It's only executed when it is
             <span style="font-weight: bold; "><i>called</i></span></p>

             <p style="color: white; margin-top: 40px; margin-left: 15px; font-size: 23px; font-weight: 600;"> How to call a function?</p>
         <p style="color: white; margin-top: -10px; margin-left: 40px; max-width: 400px;">All functions have different names. To call the function, you only have to put the function's name along with ().
            <i>eg: moveLeft() <span style="color: #3b4938e7;"> ///Will execute the function called "moveLeft"</span></i> </p>

                   <p style="color: white; margin-top: 40px; margin-left: 15px; font-size: 23px; font-weight: 600;"> What functions exist in the game?</p>
         <p style="color: white; margin-top: -10px; margin-left: 40px; max-width: 400px;">The basics are: <span style="color: rgb(183, 204, 199);">step() turnRight() turnLeft() turnTop() turnBottom()</span>. There will be more as the game proceeds </p>
            
          
        </div>


    <div id="fullContainer1" style="display: none; grid-template-columns: 1fr 1fr; height: 950px; width: 50%; background-color: rgb(0, 0, 0); height: 700px; 
    margin-left: 480px; margin-top: 100px; box-shadow: black 5px 5px 25px;" >
    
        <div id="map1" style="width: 119.8%; background-color: rgb(85, 161, 78); display: grid; grid-template-columns: repeat(8, 1fr); grid-template-rows: repeat(8, 1fr); " >
       
        </div>
        <div id="code1" style="width: 80%; background-color: rgb(218, 218, 218); margin-left: 20%; " >
            <div style="width: 100%; height: 100px; background-color: rgb(192, 192, 192); overflow-x: scroll;  display: grid; grid-template-columns: 1fr 1fr 1fr 1fr 1fr; overflow-y: hidden; ">
              
              <div onclick="textarea.value += '\n' + 'step()'" style="border-radius: 20px; width: 60px; border: 1px solid rgb(17, 17, 17); padding: 10px; transform: scale(0.8); background-color: rgb(239, 246, 250); 
               height: 55px; cursor: pointer; ">
                 <img style="width: 80%; margin-left: 7px;" src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/71/Paw_%28Animal_Rights_symbol%29.svg/768px-Paw_%28Animal_Rights_symbol%29.svg.png" alt="">
                 <p style="color: rgb(19, 87, 58); margin-top: -15px; text-align: center; font-weight: 500;"> step</p>
               </div>

                <div onclick="textarea.value += '\n' + 'turnLeft()'" style="border-radius: 20px; width: 60px; border: 1px solid rgb(17, 17, 17); padding: 10px; transform: scale(0.8); background-color: rgb(239, 246, 250); height: 55px; cursor: pointer;">
                 <img style="width: 75%; margin-left: 7px;" src="https://cdn-icons-png.flaticon.com/512/21/21112.png" alt="">
                 <p style="color: rgb(19, 87, 58); margin-top: -10px; text-align: center; font-weight: 500;"> turnLeft</p>
               </div>

                    <div onclick="textarea.value += '\n' + 'turnRight()'" style="border-radius: 20px; width: 60px; border: 1px solid rgb(17, 17, 17); padding: 10px; transform: scale(0.8); background-color: rgb(239, 246, 250); height: 55px; cursor: pointer;">
                 <img style="width: 75%; margin-left: 7px;" src="https://www.svgrepo.com/show/62915/curve-arrow-pointing-right.svg" alt="">
                 <p style="color: rgb(19, 87, 58); margin-top: -10px;  font-weight: 500; font-size: 15px ; margin-left: -5px;"> turnRight</p>
               </div>

                  <div onclick="textarea.value += '\n' + 'turnUp()'" style="border-radius: 20px; width: 60px; border: 1px solid rgb(17, 17, 17); padding: 10px; transform: scale(0.8); background-color: rgb(239, 246, 250); height: 55px; cursor: pointer;">
                 <img style="width: 75%; margin-left: 7px;" src="https://cdn1.iconfinder.com/data/icons/ios-and-android-glyphs-set-4/52/up__curved__direction__arrow-512.png" alt="">
                 <p style="color: rgb(19, 87, 58); margin-top: -10px; text-align: center; font-weight: 500;"> turnUp</p>
               </div>

                <div onclick="textarea.value += '\n' + 'turnDown()'" style="border-radius: 20px; width: 60px; border: 1px solid rgb(17, 17, 17); padding: 10px; transform: scale(0.8); background-color: rgb(239, 246, 250); height: 55px; cursor: pointer;">
                 <img style="width: 75%; margin-left: 7px;" src="https://cdn-icons-png.flaticon.com/512/21/21178.png" alt="">
                 <p style="color: rgb(19, 87, 58); margin-top: -10px; font-weight: 500;  font-size: 15px ; margin-left: -5px;"> turnDown</p>
               </div>
            </div>

            <input id="codeInp1" placeholder="Code" type="text" style="width: 65%; height: 40px;  border-radius: 8px; border: 1px solid black; 
            margin-left: 10px; margin-top: 20px ; padding-left: 10px; font-family: 'Poppins', 'sans-serif'; letter-spacing: 0.7px;">

             <button onclick="addLineToCode()" style="background-color: #5add81; color: white; width: 16%; height: 40px; border-radius: 8px; border: 0px solid black;
             font-family: 'Poppins', 'sans-serif'; font-size: 17px;  letter-spacing: 0.7px; margin-left: 25px; cursor: pointer; "> ADD</button>


             <textarea placeholder="/// Or write here"  style="resize: none; width: 96.5%; height: 440px;  margin-top: 20px; padding-left: 5px; font-size: 16px;" id="textarea"></textarea>
             <button onclick="runCodeFn()" id="runCodeBtn1" style="border-radius: 8px; background-color: rgb(47, 212, 135); color: white; font-family: 'Poppins', 'sans-serif';
             border: none; width: 25%; height: 35px; transform: scale(1.1); font-size: 18px; letter-spacing: 0.7px; margin-left: 135px; margin-top: 5px;
             transition: all 0.3s ease;">RUN</button>
             <p style="font-size: 13px; color: rgb(85, 85, 85); position: absolute; margin-top: -1px; margin-left: 143px;  "> CTRL + ENTER</p>
             <p style="font-size: 15px; color: rgb(85, 85, 85); position: absolute; margin-top: -1px; margin-left: 8px;  "> LEVEL: <span id="userCurrentLevel">1</span></p>
        </div>
    </div>

    <div id="levelsDiv" style="display: none; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0); position: absolute; grid-template-columns: repeat(6, 1fr); grid-template-rows: 1fr 1fr 1fr 1fr; ">
      <h2 style="color: white; font-size: 65px; margin-top: 5px; position: absolute; left: 15%; font-family: 'none', serif;
       "> When Silence First Cracked</h2>
        <i style="position: absolute; font-family: 'none'; font-size: 22px; color: white; margin-top: 90px; margin-left: 330px; -webkit-text-stroke: 0.3px black;"> The world feels familiar… but something is broken. — the first sign of The Merge</i>
      <div style="width: 70%; background-color: #d1d1d100; height: 200px; margin-left: 15%; margin-top: 45%; border-radius: 10px; box-shadow: black 5px 5px 25px;
        background-image: linear-gradient(to bottom, rgb(112, 184, 154), rgb(90, 149, 153));">
                <p style="position: absolute; margin-top: 4px; margin-left: 10px; font-size: 13px;">  How to call functions</p>
               <p class="levelText">LEVEL 1</p>
                <button onclick="playLevel1()" class="playBtn">PLAY</button>
        </div>
        <div style="width: 70%; background-color: #d1d1d100; height: 200px; margin-left: 15%; margin-top: 45%; border-radius: 10px; 
        box-shadow: black 5px 5px 25px; background-image: linear-gradient(to bottom, rgb(110, 152, 201), rgb(101, 96, 179));">
            <p class="levelText">LEVEL 2</p>
            <button onclick="playLevel2()" id="playBtn2" disabled class="playBtn">PLAY</button>
        </div>
        <div style="width: 70%; background-color: #d1d1d100; height: 200px; margin-left: 15%; margin-top: 45%; border-radius: 10px;
         box-shadow: black 5px 5px 25px; background-image: linear-gradient(to bottom, rgb(120, 106, 160), rgb(145, 84, 135));">
            <p class="levelText">LEVEL 3</p>
                <button disabled id="playBtn3" class="playBtn">PLAY</button>
        </div>
        <div style="width: 70%; background-color: #d1d1d100; height: 200px; margin-left: 15%; margin-top: 45%; border-radius: 10px; 
        box-shadow: black 5px 5px 25px; background-image: linear-gradient(to bottom, rgb(184, 111, 111), rgb(163, 119, 89));">
            <p class="levelText">LEVEL 4</p>
                <button disabled class="playBtn">PLAY</button>
        </div>
    </div>

    <dialog id="dialog1" style="width: 35%; height: 145px; background-color: rgb(161, 176, 194); position: absolute; display: none; margin-top: 420px; 
    margin-left: 505px; border-radius: 8px; box-shadow: black 5px 5px 25px;">

            <p id="nameDialog1" style="color: white; font-size: 22px; font-weight: 500; margin-top: -50px; margin-left: 275px; position: absolute;  "> Unknown</p>
            <img style="width: 105%; height: 100%; position: absolute; margin-top: -90px; margin-left: -40px; " src="https://static.vecteezy.com/system/resources/thumbnails/027/187/944/small/gold-and-luxury-under-line-png.png" alt="">
            <p id="dialogText1" style="font-size: 19px; "> A long time ago, there were 12 realms. One of them - our own - was The Never Realm. </p>
            <button id="nextBtn1" onclick="changeDialog(0)" style="background-color: #4c6094ea; color: white; width: 16%; height: 40px; border-radius: 8px; border: 0px solid black;
            font-family: 'Poppins', 'sans-serif'; font-size: 17px;  letter-spacing: 0.7px; margin-left: 550px; cursor: pointer; margin-top: -5px; "> NEXT</button>
            <img id="theWiseOneStudent" style="position: absolute; margin-top: -270px; margin-left: -1100px; transform: rotateY(180deg) scale(0.95); " src="https://i.ibb.co/d4PZqx13/the-Wise-One.png" alt="fassf">
  
        </dialog>

    <script>

    let codeGlossary = {
        step: "step()",
        left: "turnLeft()",
        right: "turnRight()",
        up: "turnUp()",
        down: "turnDown()"

    }


        function changeDialog(text) {
           
           let aT = [ "It was kept in balance by 7 ancient Dragon Cores. Each one held the power of a Source Dragon:  Motion, Energy, Life, Strength, Flow, Unity, and Balance. They were made to be impossible to break or move out of place with any of this world's power.",
        "But everything changed after The Merge. Barriers between realms shattered — and deep world secrets began to surface. Now, the Dragon Cores have somehow vanished. And with them gone… the very fabric of reality is starting to collapse.", 
        "You have been chosen by The Wise One to find out the cores' whereabouts, and bring them back, before it's too late.",
        "I am The Wise One's first student. I can't go with you, but I'll give you a map and I'll send you my pet soon, who will guide you.",
        "Good luck. The existence as you know it is at stake. Your first trip begins in the Never Realm.  To enter or leave any city in any realm, you need to pass a code barrier. Your first code barrier starts now."]

            
         nextBtn1.style.marginTop = "-250px"
        if(text == 0) {
            nextBtn1.addEventListener("click", () => {
                changeDialog(1)
            })
        }
        else if(text == 1) {
            nextBtn1.addEventListener("click", () => {
                changeDialog(2)
            })
        }
        else if(text == 2) {
            nextBtn1.addEventListener("click", () => {
                nameDialog1.textContent = "The Wise One's Student"
                nameDialog1.style.marginLeft = "200px"
                changeDialog(3)
            })

        }
        else if(text == 3) {
            nextBtn1.addEventListener("click", () => {
                changeDialog(4)
            })
        }
        else if(text == 4) {
            nextBtn1.addEventListener("click", () => {
            dialog1.style.display = "none"

            let imgNode = document.createElement("img")
            imgNode.src = "https://i.ibb.co/RGS4pphj/hbMaster.png"
            imgNode.style = "width: 35%; position: absolute; margin-top: -275px; margin-left: -5px; transform: rotateY(180deg); "

            let dialogNode = document.createElement("div")
            dialogNode.style = "width: 15%; height: 135px; position: absolute;  margin-top: -420px; margin-left: 290px; background-color: #a1b0c2; border-radius: 10px;"
            dialogNode.innerHTML = "<p style='font-size: 17px; margin-top: 10px; margin-left: 10px;'> Hi. I'm the pet of your Master. You can call me Badger.</p>"
            let nextBtn = document.createElement("button")
            nextBtn.innerHTML = "NEXT"
            nextBtn.style = "width: 30%; height: 30px; position: absolute; margin-top: 15px; margin-left: 155px; background-color: #4c6094ea; color: white; border-radius: 8px; border: 0px solid black; font-family: 'Poppins', 'sans-serif'; font-size: 17px;  letter-spacing: 0.7px; cursor: pointer; "
            nextBtn.addEventListener("click", () => {
                dialogNode.innerHTML = "<p style='font-size: 17px; margin-top: 10px; margin-left: 10px;'> To protect your true identity and move easier between realms, the system will visualize you as an animal.</p>"
                nextBtn.remove();
                let nextBtn2 = document.createElement("button")
                nextBtn2.innerHTML = "NEXT"
                nextBtn2.style = "width: 30%; height: 30px; position: absolute; margin-top: -40px; margin-left: 155px; background-color: #4c6094ea; color: white; border-radius: 8px; border: 0px solid black; font-family: 'Poppins', 'sans-serif'; font-size: 17px;  letter-spacing: 0.7px; cursor: pointer; "
                dialogNode.appendChild(nextBtn2)
                nextBtn2.addEventListener("click", () => {
                    dialogNode.innerHTML = "<p style='font-size: 17px; margin-top: 10px; margin-left: 10px;'> Your goal is to reach the apple by writing functions. You can write them directly, or just click the buttons on the right top.</p>"
                    nextBtn2.remove();
                    let nextBtn3 = document.createElement("button")
                    nextBtn3.innerHTML = "NEXT"
                    nextBtn3.style = "width: 30%; height: 30px; position: absolute; margin-top: -10px; margin-left: 155px; background-color: #4c6094ea; color: white; border-radius: 8px; border: 0px solid black; font-family: 'Poppins', 'sans-serif'; font-size: 17px;  letter-spacing: 0.7px; cursor: pointer; "
                    dialogNode.appendChild(nextBtn3)
                    nextBtn3.addEventListener("click", () => {
                    dialogNode.innerHTML = "<p style='font-size: 17px; margin-top: 10px; margin-left: 10px;'>You write functions by: writing their name followed by (). Hint: In this level, you only need turnLeft(), turnUp(), step()</p>"
                    nextBtn3.remove();
                    let nextBtn4 = document.createElement("button")
                    nextBtn4.innerHTML = "NEXT"
                    nextBtn4.style = "width: 30%; height: 30px; position: absolute; margin-top: -20px; margin-left: 155px; background-color: #4c6094ea; color: white; border-radius: 8px; border: 0px solid black; font-family: 'Poppins', 'sans-serif'; font-size: 17px;  letter-spacing: 0.7px; cursor: pointer; "
                    dialogNode.appendChild(nextBtn4)
                    nextBtn4.addEventListener("click", () => {
                        dialogNode.innerHTML = "<p style='font-size: 17px; margin-top: 10px; margin-left: 10px;'>Start off by clicking on the Green area to generate the map. Avoid the bugling!</p>"
                        nextBtn4.remove();
                        let nextBtn5 = document.createElement("button")
                        nextBtn5.innerHTML = "CLOSE"
                        nextBtn5.style = "width: 30%; height: 30px; position: absolute; margin-top: -10px; margin-left: 155px; background-color: #4c6094ea; color: white; border-radius: 8px; border: 0px solid black; font-family: 'Poppins', 'sans-serif'; font-size: 17px;  letter-spacing: 0.7px; cursor: pointer; "
                        dialogNode.appendChild(nextBtn5)
                        nextBtn5.addEventListener("click", () => {
                            dialogNode.remove();
                            imgNode.remove();
                        })
                })
                })
            })
            })
            
            dialogNode.appendChild(nextBtn)
            document.body.appendChild(dialogNode)
            document.body.appendChild(imgNode)

            let divNode = document.createElement("div")
            divNode.style = "width: 2%; background-color: rgb(0,0,0,0.99); height: 2%; position: absolute; transition: all 1.5s ease; opacity: 1;"
            document.body.appendChild(divNode)
            setTimeout(() => {
                divNode.style.width = "100%"
                divNode.style.height = "100%"
            }, 100);
            
          setTimeout(() => {
            divNode.style.opacity = "0"
            setTimeout(() => {
                fullContainer1.style.display = "grid"
                let divNode2 = document.createElement("div")
                divNode2.style = "width: 25%; height: 250px; position: absolute; display: grid; grid-template-columns: repeat(7, 1fr); margin-top: -700px; margin-left: -10px"
                divNode2.innerHTML = "<img src=''> "
                
                document.body.appendChild(divNode2)
                let amountsCellsAdd = 0
                document.getElementById("map1").addEventListener("click", () => {
                    let imgNode = document.createElement("img")
                    imgNode.src = "https://i.ibb.co/RGS4pphj/hbMaster.png"
                    imgNode.style = "width: 35%; position: absolute; margin-top: -275px; margin-left: -5px; transform: rotateY(180deg); "

                    let dialogNode = document.createElement("div")
                    dialogNode.style = "width: 15%; height: 135px; position: absolute;  margin-top: -420px; margin-left: 290px; background-color: #a1b0c2; border-radius: 10px;"
                    dialogNode.innerHTML = "<p style='font-size: 17px; margin-top: 10px; margin-left: 10px;'> Hi. I'm the pet of your Master. You can call me Badger.</p>"
                    let nextBtn = document.createElement("button")
                    nextBtn.innerHTML = "NEXT"
                    nextBtn.style = "width: 30%; height: 30px; position: absolute; margin-top: 15px; margin-left: 155px; background-color: #4c6094ea; color: white; border-radius: 8px; border: 0px solid black; font-family: 'Poppins', 'sans-serif'; font-size: 17px;  letter-spacing: 0.7px; cursor: pointer; "
                 
                    nextBtn.addEventListener("click", () => {
                        dialogNode.innerHTML = "<p style='font-size: 17px; margin-top: 10px; margin-left: 10px;'> To protect your true identity and move easier between realms, the system will visualize you as an animal.</p>"
                        nextBtn.addEventListener("click", () => {
                            dialogNode.innerHTML = "<p style='font-size: 17px; margin-top: 10px; margin-left: 10px;'> Your goal is to reach the apple by writing functions. You can write them directly, or just click the buttons on the right top.</p>"
                            nextBtn.addEventListener("click", () => {
                            dialogNode.innerHTML = "<p style='font-size: 17px; margin-top: 10px; margin-left: 10px;'>You write functions by: writing their name followed by (). Hint: In this level, you only need turnLeft(), turnUp(), step()</p>"
                            nextBtn.addEventListener("click", () => {
                                dialogNode.innerHTML = "<p style='font-size: 17px; margin-top: 10px; margin-left: 10px;'>Start off by clicking on the Green area to generate the map. Avoid the bugling!.</p>"
                                nextBtn.addEventListener("click", () => {
                                    dialogNode.remove();
                                    imgNode.remove();
                                })
                        })
                        })
                    })
                    })
                    userCurrentLevel.textContent == 1
                        if(amountsCellsAdd == 0) {
                            for(let i = 0; i < 64; i++) {  
                                let divNode = document.createElement("div")
                                divNode.setAttribute("class", "backgroundCellDiv")
                                if(i == 60) {
                                    divNode.innerHTML = `<img id="hbImg1" style="transform: scale(0.15); position: absolute; margin-left: -285px; margin-top: -275px; transition: all 0.2s ease;" alt="r" src="https://i.ibb.co/v6gP0Ktf/hb.png">`
                                }
                                if( validValues.includes(i)) {
                                    divNode.setAttribute("class", "wallCellDiv")
                                }
                            
                        
                                if( i == 43) {
                                    divNode.innerHTML = `<img id="appleImg1" style="transform: scale(0.12); position: absolute; margin-left: -220px; margin-top: -300px; transition: all 0.2s ease;" alt="r" src="https://cdn-icons-png.flaticon.com/512/8953/8953531.png">`
                                }
                                if(i == 52) {
                                    divNode.innerHTML = `<img class="buglingImg" style="transform: scale(0.12); position: absolute; margin-left: -285px; margin-top: -275px; transition: all 0.2s ease;" alt="r" src="https://i.ibb.co/rGRJHNQB/bugling.png">`
                                }
                            
                            
                            
                            
                                map1.appendChild(divNode);
                            }
                        }
                        amountsCellsAdd++
                })
            }, 700);
            setTimeout(() => {
                divNode.remove()
            }, 1000);
          }, 2200);

          
            })
        }

      
        dialogText1.innerHTML = aT[text]
        return text + 1
    }

        function playLevel1() {
            let divNode = document.createElement("div")
            divNode.style = "width: 2%; background-color: rgb(0,0,0,0.99); height: 2%; position: absolute; transition: all 1s ease; opacity: 1;"
            document.body.appendChild(divNode)
            setTimeout(() => {
                divNode.style.width = "100%"
                divNode.style.height = "100%"
            }, 100);
            
          setTimeout(() => {
            divNode.style.opacity = "0"
            setTimeout(() => {
                divNode.remove()
            }, 1000);
          }, 2000);

        setTimeout(() => {
            dialog1.style.display = "block";
            levelsDiv.style.display = "none";
        }, 2000);
        }

        function levelsDivDisplay() {
            levelsDiv.style.display = "grid";
            divStart.style.display = "none";  
        }

 

    function addLineToCode() {
        document.getElementById("textarea").value =  document.getElementById("textarea").value + "\n"  + document.getElementById("codeInp1").value ;
        document.getElementById("codeInp1").value = "";
    }


        const rightBorder = [7, 15, 23, 31, 39, 47, 55, 63];
        const leftBorder = [0, 8, 16, 24, 32, 40, 48, 56];
        const topBorder = [0, 1, 2, 3, 4, 5, 6, 7];
        const bottomBorder = [56, 57, 58, 59, 60, 61, 62, 63];

        const validValues = [...rightBorder, ...leftBorder, ...topBorder, ...bottomBorder];
     
        let currentPosition = 60
    function runCodeFn() {
            if(userCurrentLevel.textContent == 2) {
                currentPosition = 63
            }
            let codeLines = document.getElementById("textarea").value.split("\n"); // Starting position of the fox
            hbImg1.style = "transform: scale(0.15); position: absolute; margin-left: -285px; margin-top: -275px; transition: all 0.2s ease;"
        
            for(let i = 0; i < codeLines.length; i++) {
               
           setTimeout(() => {
             let codeLine = codeLines[i].trim();
            if(codeLine.trim() === codeGlossary.left) {
                hbImg1.style.transform = "scale(0.15) rotate(-90deg)";
            }
            else if(codeLine.trim() === codeGlossary.right) {
                hbImg1.style.transform = "scale(0.15) rotate(90deg)";
            }
            else if(codeLine.trim() === codeGlossary.down) {
                hbImg1.style.transform = "scale(0.15) rotate(180deg)";
            }
            else if(codeLine.trim() === codeGlossary.up) {
                hbImg1.style.transform = "scale(0.15) rotate(0deg)";
            }
            else if(codeLine.trim().startsWith("step(") && codeLine.trim().endsWith(")")) {
                   function stepFn() {
                    if(hbImg1.style.transform.includes("rotate(-90deg)") ) {
                        if( !leftBorder.includes(currentPosition)) {
                            currentPosition = currentPosition - 1;
                        hbImg1.style.marginLeft = (Number(hbImg1.style.marginLeft.replace("px", "")) - 70) + "px"
                        }

                        
                    }
                    else if(hbImg1.style.transform == "scale(0.15) rotate(90deg)") {
                        if( !rightBorder.includes(currentPosition)) {
                            currentPosition = currentPosition + 1
                            hbImg1.style.marginLeft = (Number(hbImg1.style.marginLeft.replace("px", "")) + 70) + "px"
                        }
                    }
                    else if(hbImg1.style.transform == "scale(0.15) rotate(180deg)") {
                        if(!bottomBorder.includes(currentPosition)) {
                            currentPosition = currentPosition + 8
                            hbImg1.style.marginTop = (Number(hbImg1.style.marginTop.replace("px", "")) + 87) + "px"
                        }                    
                    }
                    else if(hbImg1.style.transform == "scale(0.15) rotate(0deg)") {
                        if(!topBorder.includes(currentPosition)) {
                            currentPosition = currentPosition - 8
                            hbImg1.style.marginTop = (Number(hbImg1.style.marginTop.replace("px", "")) - 87) + "px"
                        }
                    }               
                    else {
                        if(!topBorder.includes(currentPosition)) {
                            currentPosition = currentPosition - 8
                            hbImg1.style.marginTop = (Number(hbImg1.style.marginTop.replace("px", "")) - 87) + "px"
                        }
                    }
                   }     
                   stepFn()

                    let stepParameter = Number(codeLine.split("(")[1].split(")")[0])
                    for(let i = 0; i < stepParameter - 1; i++) {
                        stepFn()
                    }
            }

            console.log(currentPosition)
            checkIfBuglingIsReached()
            checkIfAppleIsReached()
            
           }, i * 350);
          
        }

            function checkIfAppleIsReached() {

                if(userCurrentLevel.textContent == 1) {
                    if(currentPosition == 35) {
                        appleImg1.style.transform = "scale(0.02)"
                       setTimeout(() => {
                        passLevelDialog()
                       }, 1500);
                    }
                   
                }
                else if(userCurrentLevel.textContent == 2)  {
                    if(codeLines.length <= 6) {
                        if(currentPosition == 47) {
                            appleImg1.style.transform = "scale(0.02)"
                            setTimeout(() => {
                                passLevelDialog()
                            }, 1500);
                        }
                    }
                    else { alert("Your code must be less than 7 lines. Empty lines do count")}
                }
            }
        function checkIfBuglingIsReached() {
        if(userCurrentLevel.textContent == 1) {
            if(currentPosition == 52) {
                alert("You've been caught by the bugling!")
                hbImg1.style = "transform: scale(0.15); position: absolute; margin-left: -285px; margin-top: -275px; transition: all 0.2s ease;"
            }
        }
        else if(userCurrentLevel.textContent == 2) {
            let buglingDiv = [55, 54, 53, 52]
            if(buglingDiv.includes(currentPosition)) {
                alert("You've been caught by the bugling!")
                hbImg1.style = "transform: scale(0.15); position: absolute; margin-left: -285px; margin-top: -275px; transition: all 0.2s ease;"
            }
        }   
    }
   
    }





    let buttons = document.querySelectorAll("button")
    buttons.forEach(b => {
        if(b.disabled) {
            b.style.filter = "brightness(60%)"
            b.style.cursor = "not-allowed"
        }
    })
   
    function passLevelDialog() {
        let divNode = document.createElement("div")
        divNode.style = "width: 15%; background-color: #3be47c; height: 120px; position: absolute; transition: all 0.4s ease; margin-left: 35%; margin-top: -400px; border-radius: 6px; border: 1px solid black; transform: scale(0)"
        divNode.innerHTML = "<p style='font-size: 23px; color: white; font-weight: 500;'>You've passed the level!</p>"
        document.body.appendChild(divNode)
        setTimeout(() => {
            divNode.style.transform = "scale(1)"
        }, 10);
        setTimeout(() => {
            divNode.style.transform = "scale(0)"
            setTimeout(() => {
                divNode.remove()
                if(Number(localStorage.getItem("userLevelCODING")) > userCurrentLevel.textContent) {
                    alert(localStorage.getItem("userLevelCODING"))
                }
                else {
                    if(Number(localStorage.getItem("userLevelCODING")) == 0) {
                           localStorage.setItem("userLevelCODING", 2)
                    }
                    else {
                        localStorage.setItem("userLevelCODING", (Number(localStorage.getItem("userLevelCODING")) + 1) || 2)
                    }
                    alert(localStorage.getItem("userLevelCODING"))
                }
                location.reload()
            }, 450);
        }, 2500);
       
    }


    function playLevel2() {

        let dialogNode = document.createElement("dialog")
          dialogNode.style = "width: 35%; height: 145px; background-color: rgb(161, 176, 194); position: absolute; display: block; margin-top: 420px; margin-left: 505px; border-radius: 8px; box-shadow: black 5px 5px 25px;"
          dialogNode.innerHTML = "<p style='color: white; font-size: 22px; font-weight: 500; margin-top: -50px; margin-left: 285px; position: absolute;  '> Badger</p>"
          dialogNode.innerHTML += "<img style='width: 105%; height: 100%; position: absolute; margin-top: -90px; margin-left: -40px; ' src='https://static.vecteezy.com/system/resources/thumbnails/027/187/944/small/gold-and-luxury-under-line-png.png' alt=''>"
          dialogNode.innerHTML += "<p id='dialogText2' style='font-size: 19px; '> That was amazing! Our journey still continues at the Never Realm. I've got you a map of half of the Merged Realms to help you visualize our goal. Since The Merge ocurred recently, it's really hard to even get half one </p>"
          dialogNode.innerHTML += "<button id='nextBtn2' style='background-color: #4c6094ea; color: white; width: 16%; height: 40px; border-radius: 8px; border: 0px solid black; font-family: 'Poppins', 'sans-serif'; font-size: 18px;  letter-spacing: 0.7px; margin-left: 550px; cursor: pointer; margin-top: -5px; '> SEE</button>"
          dialogNode.innerHTML += "<img style='position: absolute; margin-top: -350px; margin-left: -560px; transform: rotateY(180deg) scale(0.42); ' src='https://i.ibb.co/ZzW8Bmzt/hbImg2.png' alt='fassf'>"

        let divNode = document.createElement("div")
            divNode.style = "width: 2%; background-color: rgb(0,0,0,0.99); height: 2%; position: absolute; transition: all 1s ease; opacity: 1;"
            document.body.appendChild(divNode)
            setTimeout(() => {
                divNode.style.width = "100%"
                divNode.style.height = "100%"
            }, 100);
            
          setTimeout(() => {
            divNode.style.opacity = "0"
            setTimeout(() => {
                divNode.remove()
            }, 1000);
          }, 2000);

        setTimeout(() => {
            levelsDiv.style.display = "none";
           setTimeout(() => {
            document.body.appendChild(dialogNode)
           }, 450);

        }, 2000);
        
        setTimeout(() => {
            nextBtn2.addEventListener("click", () => {
                dialogNode.innerHTML = "<p style='color: white; font-size: 22px; font-weight: 500; margin-top: -50px; margin-left: 285px; position: absolute;  '> Badger</p>"
                dialogNode.innerHTML += "<img style='width: 105%; height: 100%; position: absolute; margin-top: -90px; margin-left: -40px; ' src='https://static.vecteezy.com/system/resources/thumbnails/027/187/944/small/gold-and-luxury-under-line-png.png' alt=''>"
                dialogNode.innerHTML += "<p id='dialogText2' style='font-size: 19px; '> That was amazing! Our journey still continues at the Never Realm. I've got you a map of half of the Merged Realms to help you visualize our goal. Since The Merge ocurred recently, it's really hard to even get half one </p>"
                dialogNode.innerHTML += "<img style='position: absolute; margin-top: -350px; margin-left: -560px; transform: rotateY(180deg) scale(0.42); ' src='https://i.ibb.co/ZzW8Bmzt/hbImg2.png' alt='fassf'>"

            let imgNode = document.createElement("img")
            imgNode.style = "width: 1%; position: absolute; margin-top: -75px; margin-left:225px; transition: all 0.4s ease;"
            imgNode.src = "https://i.ibb.co/27qwbt0T/merged-Realms-Map1.png"
            dialogNode.appendChild(imgNode)
            setTimeout(() => {
                imgNode.style.width = "90%"
                imgNode.style.marginLeft = "70px"
                imgNode.style.marginTop = "-250px"
                imgNode.style.transform = "scale(1.55)"
                setTimeout(() => {
                    imgNode.style.transform = "scale(0.05) rotate(180deg)"
                    setTimeout(() => {
                        imgNode.remove()
                        dialogText2.textContent = "I'll try to get you a better one soon. Now, let me tell you more about what was The Merge";
                        dialogNode.innerHTML += "<button id='nextBtn22' style='background-color: #4c6094ea; color: white; width: 16%; height: 40px; border-radius: 8px; border: 0px solid black; font-family: 'Poppins', 'sans-serif'; font-size: 18px;  letter-spacing: 0.7px; margin-left: 420px; margin-top: 55px; transition: all 0.3s ease; '> NEXT</button>"
                         dialogText2.style.fontSize = "18px"
                        setTimeout(() => {
                            nextBtn22.addEventListener("click", () => {
                                dialogText2.textContent = "Not long ago, there were 12 realms, and the only possible way to travel between them, was through a special portal located underground. There was 1 portal for each realm."
                                nextBtn22.addEventListener("click", () => {
                                    dialogText2.textContent = 'I remember we were about to begin a new adventure. My team and I hadn’t even boarded the ship when suddenly, the entire sky turned black. A blood-red rift tore open above us, pulling and ejecting everything around it. In just 20 seconds, the sky was full of these terrifying red portals.'
                                    nextBtn22.addEventListener("click", () => {
                                        dialogText2.textContent = 'I managed to regroup with my team and our master. But before we could make sense of anything, a violent gust of wind dragged us all into one of the portals. It wasn’t just us — people from every realm were getting pulled in too.'
                                        nextBtn22.addEventListener("click", () => {
                                            dialogText2.textContent = 'The last thing I remember is getting flashbacks from a conversation I had with my master just a few days before all this. He seemed deeply troubled about something he called The Coalescence. He warned me, "Only together can we survive." He believed it was an event meant to happen thousands of years in the future — but somehow, it happened that day.'
                                           
                                        nextBtn22.addEventListener("click", () => {
                                            dialogText2.textContent = 'Now I see that "The Coalescence" was actually the old prophesied name for The Merge. The day where all the realms merged together into one.'
                                            nextBtn22.addEventListener("click", () => {
                                                    dialogText2.textContent = 'When I woke up, I was in my origin realm, The Never Realm. Or at least, what was left of it, I didn\' know what had happened. After exploring for a while, I found one of my teammates. Neither of us knew anything of what happened after the last time we saw each other.'
                                                    nextBtn22.addEventListener("click", () => {
                                                        dialogText2.textContent = 'Less than a month has passed since The Merge. We have already accustomed to all the realms being merged into one. But the union of the realms. is unstable. That instability causes what we now call MergeQuakes.'
                                                        nextBtn22.addEventListener("click", () => {
                                                            dialogText2.textContent = 'The MergeQuakes are when 2 realms attempt to share the same area, and they cause a small Merge, that only affects the surroundings, but it\'s still fatal. They can happen anywhere at anytime. But, don\'t worry, as of now, they don\'t seem to be happening often. But you should know:'
                                                            nextBtn22.addEventListener("click", () => {
                                                                dialogText2.textContent = 'The only way to stop MergeQuakes is by using pure energy — and that only comes from Dragon Cores or directly from the Source Dragons. Since they appear to have shattered or dissapeared after The Merge, there\'s no current way to stop them. That\'s why your mission is extremely important.'
                                                                nextBtn22.addEventListener("click", () => {
                                                                    dialogText2.textContent = 'Your next journey continues in the Never Realm. I\'ll go with you. We don\'t know what happened to the Dragon Cores. Maybe the only way to get them back is to contact the Source Dragons to create new ones. Let\'s go.'
                                                                    nextBtn22.addEventListener("click", () => {
                                                                        dialogNode.remove()
                                                                        setTimeout(() => {
                                                                            document.body.style.backgroundImage = "url('https://img.freepik.com/premium-vector/vector-illustration-mountain-landscape-winter_719015-46.jpg')"
                                                                             document.body.style.backgroundPositionY = "-95px"
                                                                        }, 1525);

                                                                        let divNode = document.createElement("div")
                                                                        divNode.style = "width: 2%; background-color: rgb(0,0,0,0.99); height: 2%; position: absolute; transition: all 1.5s ease; opacity: 1;"
                                                                        document.body.appendChild(divNode)
                                                                        setTimeout(() => {
                                                                            divNode.style.width = "100%"
                                                                            divNode.style.height = "100%"
                                                                        }, 100);
                                                                        
                                                                    setTimeout(() => {
                                                                        divNode.style.opacity = "0"
                                                                        setTimeout(() => {
                                                                            fullContainer1.style.display = "grid"
                                                                            userCurrentLevel.textContent = 2
                                                                            let imgNode = document.createElement("img")
                                                                            imgNode.src = "https://i.ibb.co/RGS4pphj/hbMaster.png"
                                                                            imgNode.style = "width: 35%; position: absolute; margin-top: -275px; margin-left: -5px; transform: rotateY(180deg); "


                                                                            let dialogNode = document.createElement("div")
                                                                            let pNode = document.createElement("p")
                                                                            pNode.style = "font-size: 15px; margin-top: 10px; margin-left: 10px;"
                                                                            dialogNode.style = "width: 15%; height: 135px; position: absolute;  margin-top: -420px; margin-left: 290px; background-color: #a1b0c2; border-radius: 10px;"
                                                                            pNode.innerHTML = "Hi. I just told you a lot of things about The Merge. Now, I\'ll explain to you something new."
                                                                            
                                                                            let nextBtnn2 = document.createElement("button")
                                                                             nextBtnn2.style = "width: 30%; height: 30px; position: absolute; margin-top: 125px; margin-left: 185px; background-color: #4c6094ea; color: white; border-radius: 8px; border: 0px solid black; font-family: 'Poppins', 'sans-serif'; font-size: 17px;  letter-spacing: 0.7px; cursor: pointer; "
                                                                             nextBtnn2.innerHTML +="NEXT"
                                                                            
                                                                             nextBtnn2.addEventListener("click", () => {
                                                                                pNode.innerHTML = "I've already taught you the basic functions. step(), turnLeft(), turnRight(), turnUp(), turnDown()."
                                                                                nextBtnn2.addEventListener("click", () => {
                                                                                    pNode.innerHTML = "Now, you can write numbers inside the parentheses to indicate how many times does the function need to be executed. We'll call that number a parameter."
                                                                                    nextBtnn2.addEventListener("click", () => {
                                                                                     pNode.innerHTML = "We're entering a new city in the Never Realm, so you have to pass a code barrier. Your goal is to reach the scroll over there with maximum 6 lines of code."
                                                                                    nextBtnn2.addEventListener("click", () => {
                                                                                        pNode.innerHTML = "You'll use parameters in step(). For example, step(3) will make move 3 steps. Start off by clicking the green area to generate the map."
                                                                                        nextBtnn2.innerHTML = "CLOSE"
                                                                                        nextBtnn2.addEventListener("click", () => {
                                                                                            dialogNode.remove();
                                                                                            imgNode.remove();
                                                                                        })
                                                                                })
                                                                                })
                                                                            })
                                                                            })
                                                                            
                                                                            dialogNode.appendChild(nextBtnn2)
                                                                            dialogNode.appendChild(pNode)

                                                                            document.body.appendChild(dialogNode)
                                                                            document.body.appendChild(imgNode)
                                                                            let amountsCellsAdd = 0
                                                                            document.getElementById("map1").addEventListener("click", () => {
                                                                                let currentPosition = 63
                                                                                    if(amountsCellsAdd == 0) {
                                                                                        for(let i = 0; i < 64; i++) {  
                                                                                            let divNode = document.createElement("div")
                                                                                            divNode.setAttribute("class", "backgroundCellDiv")
                                                                                            if(i == 63) {
                                                                                                divNode.innerHTML = `<img id="hbImg1" style="transform: scale(0.15); position: absolute; margin-left: -285px; margin-top: -275px; transition: all 0.2s ease;" alt="r" src="https://i.ibb.co/v6gP0Ktf/hb.png">`
                                                                                            }
                                                                                            if( validValues.includes(i)) {
                                                                                                divNode.setAttribute("class", "wallCellDiv")
                                                                                            }
                                                                                            if( i == 47) {
                                                                                                divNode.innerHTML = `<img id="appleImg1" style="transform: scale(0.12); position: absolute; margin-left: -220px; margin-top: -212px; transition: all 0.2s ease;" alt="r" src="https://cdn-icons-png.flaticon.com/512/8194/8194907.png">`
                                                                                            }
                                                                                            let buglingDiv = [52, 53, 54, 55]
                                                                                            if(buglingDiv.includes(i)) {
                                                                                                divNode.innerHTML = `<img class="buglingImg" style="transform: scale(0.12); position: absolute; margin-left: -285px; margin-top: -275px; transition: all 0.2s ease;" alt="r" src="https://i.ibb.co/rGRJHNQB/bugling.png">`
                                                                                            }
                                                                                            map1.appendChild(divNode);
                                                                                        }
                                                                                    }
                                                                                    amountsCellsAdd++
                                                                            })
                                                                        }, 700);
                                                                        setTimeout(() => {
                                                                            divNode.remove()
                                                                        }, 1000); 
                                                                    }, 2200);
                                                                    })
                                                                })
                                                            })
                                                        })
                                                    })
                                                })
                                            })
                                        })
                                    })
                                })
                            })
                        }, 25);
                    }, 450);
                }, 5500);
            }, 10);
           
        })
        }, 3000);

    }



    function checkStorage() {
    const level = parseInt(localStorage.getItem("userLevelCODING"))

    if (level >= 2) {
        playBtn2.disabled = false
        playBtn2.style.filter = "brightness(100%)"
        playBtn2.style.cursor = "pointer"
    }
    if (level >= 3) {
        playBtn3.disabled = false
        playBtn3.style.filter = "brightness(100%)"
        playBtn3.style.cursor = "pointer"
    }
    // Add more levels if needed
    if (level >= 4) {
        playBtn4.disabled = false
        playBtn4.style.filter = "brightness(100%)"
        playBtn4.style.cursor = "pointer"
    }
    }

    checkStorage()


  </script>
</body>
</html>
